{
  "submission": {
    "id": "120ois4",
    "title": "Dockerfile Lambda or ECS",
    "author": "nanksk",
    "selftext": "I am learning Docker, so please help me. \n\n&#x200B;\n\nI am using Python for development.\n\nTo create a Docker for Lambda, AWS suggests to use the foillowing base image and CMD command.\n\n FROM public.ecr.aws/lambda/python:3.8 \n\n....\n\n....\n\n CMD \\[ \"app.lambda\\_handler\" \\] \n\n&#x200B;\n\nThis works fine, but say in future I want to move to Fargate, or run the image using AWS Batch would I need to change the Dockerfile and create a new image?",
    "selftext_html": "<!-- SC_OFF --><div class=\"md\"><p>I am learning Docker, so please help me. </p>\n\n<p>&#x200B;</p>\n\n<p>I am using Python for development.</p>\n\n<p>To create a Docker for Lambda, AWS suggests to use the foillowing base image and CMD command.</p>\n\n<p>FROM public.ecr.aws/lambda/python:3.8 </p>\n\n<p>....</p>\n\n<p>....</p>\n\n<p>CMD [ &quot;app.lambda_handler&quot; ] </p>\n\n<p>&#x200B;</p>\n\n<p>This works fine, but say in future I want to move to Fargate, or run the image using AWS Batch would I need to change the Dockerfile and create a new image?</p>\n</div><!-- SC_ON -->",
    "url": "https://www.reddit.com/r/aws/comments/120ois4/dockerfile_lambda_or_ecs/",
    "permalink": "/r/aws/comments/120ois4/dockerfile_lambda_or_ecs/",
    "subreddit": "aws",
    "created_utc": 1679673411.0,
    "score": 4,
    "ups": 4,
    "downs": 0,
    "upvote_ratio": 0.76,
    "num_comments": 5,
    "is_self": true,
    "over_18": false,
    "spoiler": false,
    "stickied": false,
    "locked": false,
    "archived": false,
    "distinguished": null,
    "link_flair_text": "containers",
    "timestamp": "2023-03-24T08:56:51"
  },
  "comments": [
    {
      "id": "jdib1wb",
      "author": "pint",
      "body": "the lambda docker image comes with the so called lambda RIC, which will download the invokation and then report success / failure. it also sets up the entry point to start the RIC.\n\nmost likely you could develop an image that can operate both as lambda and batch task, but honestly i don't see the point. the result will be a mess, with no real benefit.",
      "body_html": "<div class=\"md\"><p>the lambda docker image comes with the so called lambda RIC, which will download the invokation and then report success / failure. it also sets up the entry point to start the RIC.</p>\n\n<p>most likely you could develop an image that can operate both as lambda and batch task, but honestly i don&#39;t see the point. the result will be a mess, with no real benefit.</p>\n</div>",
      "created_utc": 1679674926.0,
      "score": 3,
      "ups": 3,
      "downs": 0,
      "permalink": "/r/aws/comments/120ois4/dockerfile_lambda_or_ecs/jdib1wb/",
      "parent_id": "t3_120ois4",
      "depth": 0,
      "is_submitter": false,
      "stickied": false,
      "edited": false,
      "distinguished": null,
      "timestamp": "2023-03-24T09:22:06"
    },
    {
      "id": "jdk8xms",
      "author": "trnka",
      "body": "Yeah you're going to need a different Dockerfile for Lambda and ECS. If it's a classic web service, the Python code may change somewhat as well. For instance, you can use Flask or FastAPI in Lambda if you setup API Gateway to forward the routes and such, but also need a little bridge to interpret the Lambda event/context and interact correctly with either of those libraries.\n\nLikewise, it affects the way you implement things like database connections, open sockets, and background tasks.",
      "body_html": "<div class=\"md\"><p>Yeah you&#39;re going to need a different Dockerfile for Lambda and ECS. If it&#39;s a classic web service, the Python code may change somewhat as well. For instance, you can use Flask or FastAPI in Lambda if you setup API Gateway to forward the routes and such, but also need a little bridge to interpret the Lambda event/context and interact correctly with either of those libraries.</p>\n\n<p>Likewise, it affects the way you implement things like database connections, open sockets, and background tasks.</p>\n</div>",
      "created_utc": 1679703247.0,
      "score": 3,
      "ups": 3,
      "downs": 0,
      "permalink": "/r/aws/comments/120ois4/dockerfile_lambda_or_ecs/jdk8xms/",
      "parent_id": "t3_120ois4",
      "depth": 0,
      "is_submitter": false,
      "stickied": false,
      "edited": false,
      "distinguished": null,
      "timestamp": "2023-03-24T17:14:07"
    },
    {
      "id": "jdi71k9",
      "author": "AutoModerator",
      "body": "\nTry [this search](https://www.reddit.com/r/aws/search?q=flair%3A'containers'&sort=new&restrict_sr=on) for more information on this topic.\n\n^Comments, ^questions ^or ^suggestions ^regarding ^this ^autoresponse? ^Please ^send ^them ^[here](https://www.reddit.com/message/compose/?to=%2Fr%2Faws&subject=autoresponse+tweaks+-+containers).\n\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/aws) if you have any questions or concerns.*",
      "body_html": "<div class=\"md\"><p>Try <a href=\"https://www.reddit.com/r/aws/search?q=flair%3A&#x27;containers&#x27;&amp;sort=new&amp;restrict_sr=on\">this search</a> for more information on this topic.</p>\n\n<p><sup>Comments,</sup> <sup>questions</sup> <sup>or</sup> <sup>suggestions</sup> <sup>regarding</sup> <sup>this</sup> <sup>autoresponse?</sup> <sup>Please</sup> <sup>send</sup> <sup>them</sup> <sup><a href=\"https://www.reddit.com/message/compose/?to=%2Fr%2Faws&amp;subject=autoresponse+tweaks+-+containers\">here</a>.</sup></p>\n\n<p><em>I am a bot, and this action was performed automatically. Please <a href=\"/message/compose/?to=/r/aws\">contact the moderators of this subreddit</a> if you have any questions or concerns.</em></p>\n</div>",
      "created_utc": 1679673412.0,
      "score": 0,
      "ups": 0,
      "downs": 0,
      "permalink": "/r/aws/comments/120ois4/dockerfile_lambda_or_ecs/jdi71k9/",
      "parent_id": "t3_120ois4",
      "depth": 0,
      "is_submitter": false,
      "stickied": false,
      "edited": false,
      "distinguished": "moderator",
      "timestamp": "2023-03-24T08:56:52"
    },
    {
      "id": "jdic4gf",
      "author": "nanksk",
      "body": ">lambda RIC\n\nSo, in practice you would change your Dockerfile if you want to say later want to run your docker in batch vs lambda?",
      "body_html": "<div class=\"md\"><blockquote>\n<p>lambda RIC</p>\n</blockquote>\n\n<p>So, in practice you would change your Dockerfile if you want to say later want to run your docker in batch vs lambda?</p>\n</div>",
      "created_utc": 1679675329.0,
      "score": 3,
      "ups": 3,
      "downs": 0,
      "permalink": "/r/aws/comments/120ois4/dockerfile_lambda_or_ecs/jdic4gf/",
      "parent_id": "t1_jdib1wb",
      "depth": 1,
      "is_submitter": true,
      "stickied": false,
      "edited": false,
      "distinguished": null,
      "timestamp": "2023-03-24T09:28:49"
    },
    {
      "id": "jdis7hr",
      "author": "pint",
      "body": "sure. why not? it is not like you'll move it back and forth. once you decide on one tech, support for the other is just ballast.",
      "body_html": "<div class=\"md\"><p>sure. why not? it is not like you&#39;ll move it back and forth. once you decide on one tech, support for the other is just ballast.</p>\n</div>",
      "created_utc": 1679681417.0,
      "score": 2,
      "ups": 2,
      "downs": 0,
      "permalink": "/r/aws/comments/120ois4/dockerfile_lambda_or_ecs/jdis7hr/",
      "parent_id": "t1_jdic4gf",
      "depth": 2,
      "is_submitter": false,
      "stickied": false,
      "edited": false,
      "distinguished": null,
      "timestamp": "2023-03-24T11:10:17"
    }
  ],
  "total_comments": 5,
  "fetched_at": "2025-09-13T20:47:24.181549"
}